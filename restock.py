# Here it is. The holy grail of Neopets automation -- restocking.
import bisect
import datetime
import io
import os
import re
import random
import sys

from PIL import Image, ImageDraw, ImageFilter

import lib
import item_db
import inventory
import neotime

re_shop_item = re.compile(r'''<A href=".*?obj_info_id=(\d+)&stock_id=(\d+)&g=(\d+)" onClick=".*?brr=(\d+)';.*?"><IMG src="http://images.neopets.com/items/(.*?)" .*? title="(.*?)" border="1"><BR></A><B>(.*?)</B><BR>(\d+) in stock<BR>Cost: (.*?) NP''')
re_header = re.compile(r'''<td class="contentModuleHeader">(.*?)</td>''')
re_captcha = re.compile(r'''<input type="image" src="/captcha_show\.phtml\?_x_pwned=(.*?)".*>''')

re_jn_item = re.compile(r'''<a href="/item/(\d+)/"><img .*?></a><br><a .*?>(.*?)</a>(?:\n<br><span class="text-small"><a href=".*?" class=".*?"(?:title="(.*?)")?>(.*?)</a></span>)?''')

MIN_PROFIT = 2000
MIN_PROFIT_MARGIN = 0.4

# ALWAYS buy these items if they are being sold for less than some (huge)
# amount. Helps short-circuit the lengthy process of collecting price data
# ourselves.
always_buy = {
    # 14. Chocolate Factory
    #'Reject Gold Mote Lolly': 700,

    # 68. Coin shop
    'Large Black Collectable Scarab': 40000000,
    'Smiling Space Faerie Coin': 33500000,
    'Scowling Sloth Coin': 30000000,
    'Neopian Times Coin': 12700000,
    'Money Tree Coin': 3000000,
    'Spotted Blue Collectable Scarab': 2500000,
    'Dr Sloth Coin': 2500000,
    #'Polkadot Collectable Scarab': 2777,

    # 1. Food Shop
    'Jelly Negg': 8000000,
    'Rainbow Cybunny Negg': 7500000,
    'Green Picnic Hamper': 4000000,
    'Black Currant Juice': 3250000,
    'Mighty Steakwich': 2850000,
    'Chocolate Coated Blue Cheese': 2500000,
    'Mega Sandwich': 2100000,
    'Cheesy Carrot Chunks': 2000000,
    'Kadoatie Biscuits': 2000000,
    'Puzzle Fruit': 2000000,
    'Rainbow Carrot': 2000000,
    'Flaming Tuskaninny Ice Cream': 1880000,
    'Mega Manoroot Sandwich': 1760000,
    'Happy Anniversary Negg': 1720000,
    'Grey Toast': 1700000,
    'Big Gulp Neocola': 1650000,
    'Illusens Family Recipe Cake': 1640000,
    'Chokato Toffee Apple': 1600000,
    'Blue Cybunny Negg': 1500000,
    'Container of Purple Liquid': 1500000,
    'Egg and Tomato Sandwich': 1500000,
    'Upside Down Ice Cream': 1500000,
    'Tigersquash Custard': 1400000,
    'Knowledge Hungry Burger': 1300000,
    'Diet Big Gulp Neocola': 1000000,
    'Golden Caviar': 1000000,
    'Polka Carrot': 1000000,
    'Fun Icy Cheese Pop': 999999,
    'Pretty Purple Princess Negg': 999999,
    'Tchea Toffee Apple': 999999,
    'Illusen Negg': 995000,
    'Cheesy Choco Cookie': 975000,
    'Headless Horsefish': 950000,
    'Rainbow Apple': 950000,
    'Uni Ice Cream': 945000,
    'Donut Burger': 940000,
    'Plum': 885000,
    'Loretta Fontaines Perfect Pizza': 875000,
    'Barnacle Bills Belt Busting Burger': 825000,
    'Cheesy Strawberry Slice': 825000,
    'Purple Picnic Hamper': 780000,
    'Christmas Pattern Negg': 765000,
    'BLT Croissant': 750000,
    'Starry Cupcake': 680000,
    'Fall Leaf Salad': 675000,
    'Black Caviar': 575000,
    'Starry Scorchipepper': 575000,
    'Wocky Steak': 550000,
    'Baby Bloater': 540000,
    'Mutated Negg': 540000,
    'Uni Salad': 530000,
    'Puntec Parcel': 475000,
    'Cheesy Chocoshake': 450000,
    'Bangers and Mash': 430000,
    'Chocolate Coated Holey Cheese': 420000,
    'Blueberry and Oyster Ice Cream': 415000,
    'Blue Picnic Hamper': 400000,
    'Chocolate Coated Cheese': 370000,
    'Watermelon Jetsam': 370000,
    'Honey and Bacon Burger': 365000,
    'Hogshead': 350000,
    'Kau Kau Farm Organic Bottled Milk': 350000,
    'Raspberry Toffee Apple': 335000,
    'Chilli Salmon Souffle': 320000,
    'Squid on a Stick': 315000,
    'Mega Pipper Sandwich': 310000,
    'Grog Light': 300000,
    'Island Meatloaf': 290000,
    'Mega Tuna Sandwich': 290000,
    'Pinanna Paradise': 290000,
    'Baby Elephante Milk Bottle': 285000,
    'Lemon Pop': 275000,
    'Lenny Salad': 270000,
    'Le Sausage': 265000,
    'Assorted Vandagyre Approved Nuts': 260000,
    'Deluxe Elephante Cake': 260000,
    'Forbidden Plunder': 250000,
    'Steak Surprise': 230000,
    'Zeenana Toffee Apple': 230000,
    'Cheesy Krawk Dip': 225000,
    'Rainbow Neggnog': 220000,
    'Bomberry Grog': 215000,
    'Funnydew Neggnog': 215000,
    'Pirate Negg': 215000,
    'Invisible Cookie': 210000,
    'Chocolate Coated Tangy Cheese': 205000,
    'Cybunny Day Canape': 200000,
    'Ice Apple': 200000,
    'Lawyerbot Degreaser': 200000,
    'Chocolate Joy Fun Pop': 195000,
    'Jalapeno Kacheek Cheese': 190000,
    'Glowing Apple': 185000,
    'Heart Shaped Negg': 180000,
    'Krakuberry Cove': 175000,
    'Man O War': 175000,
    'Walk The Plank': 175000,
    'Acara Ice Cream Surprise': 170000,
    'Cannon Fodder': 170000,
    'Keel Haul': 170000,
    'Extra Fancy Crackers': 165000,
    'Fancy Rack of Lamb with Fruit': 165000,
    'Carrot Crown': 150000,
    'Red Picnic Hamper': 145000,
    'Seaweed Flotsam Burger': 145000,
    'Square Meat': 145000,
    'Wocky Plum Pudding': 145000,
    'Flower Nectar': 143000,
    'Strawberry Taco': 143000,
    'Green Ham': 142000,
    'Land Lubber': 142000,
    'Steak Negg': 141000,
    'Deluxe Peophin Burger': 138000,
    'Faeriemoya': 135000,
    'Rainbow Negg': 132000,
    'Thorn on the Cob': 130000,
    'Bag of Peanuts': 129000,
    'Lutari Fizz': 126000,
    'Kau Waffles': 121000,
    'Evil Popcorn': 118000,
    'Asparagus Borovan Lasagne': 117000,
    'French Toast PB&amp;J Sandwich': 115000,
    'Meerca Apertif': 109000,
    'Apple Juice Sippy Cup': 105000,
    'Frozen Veggie Delight': 103000,
    'Ruki Salad': 101000,
    'Tasty Guacamole': 100000,
    'Watermelon Maraquan Shoyru': 100000,
    'Fried Negg Sandwich': 99500,
    'JubJub Coconut Juice': 97000,
    'Kau Kau Farm Soy Milk': 96500,
    'Bacon Taco': 93000,
    'Super Icy Custard': 93000,
    'Peppered Salmon Dish': 90500,
    'Peanut Dash Stir Fry': 90000,
    'Cawl': 89000,
    'Chokato Neggnog': 88000,
    'Leftover Shortcrust Pastry': 88000,
    'Peach Jelly': 88000,
    'Baked Avocado with Curried Sauce': 82500,
    'Petpet Crackers': 81500,
    'Fire Carrot': 80500,
    'Welsh Rarebit': 79000,
    'Grey Waffles': 77500,
    'Fire Apple': 73000,
    'Mynci Surprise Ice Cream': 60000,
    'Raspberry Jam': 60000,
    'Watermelon Roll': 60000,
    'Squibble Berry Sandwich': 55500,
    'Speckled Negg': 54500,
    'Purple Cybunny Negg': 53500,
    'Flotsam Fin Soup': 53000,
    'Grey Eggs and Bacon': 44000,
    'Noil Candy Floss': 42800,
    'Battle Duck Negg': 42700,
    'Chocolate Shoyru Meatball': 39000,
    'Ultimate Icy Negg': 38600,
    'Thistleberry Sandwich': 38400,
    'Flied Rice': 34900,
    'Rock Negg': 34500,
    'Twin Salad': 34500,
    'Turkey Drumstick Dinner': 33800,
    'Purple Carrot': 33700,
    'Chocolate Ice Cream': 33400,
    'Candy Cane Negg': 32300,
    'Techo Jelly Surprise': 32300,
    'Swirly Negg #498': 31900,
    'Decorative Negg': 31800,
    'Partitioned Negg': 31700,
    'Ultra Icy Negg': 31700,
    'Buzz Sandwich': 31500,
    'Sweet and Sour Negg': 31000,
    'Yellow Negg': 30400,
    'Glass Negg': 30200,
    'Maple Syrup Negg': 30100,
    'Exotic Plant': 30000,
    'Meerca Bolognese': 29500,
    'Fruit Tart': 27500,
    'Ornate Purple Negg': 27200,
    'Stuffed Chokatos': 26900,
    'Blue Negg': 26400,
    'Pink Negg': 25900,
    'Strawberry and Orange Blend': 24900,
    'Orange Negg': 22400,
    'Super Icy Negg': 20800,
    'Vanilla Neocola': 19900,
    'Lemon Swirly Negg': 19600,
    'Fried Something Something': 18500,
    'Nimmo Day Fruit Cake': 18400,
    'Roast Chestnut Neggnog': 18400,
    'Pumpkin Bread': 17900,
    'Beef Wellington': 17500,
    'Mynci Fruit Kebab': 16000,
    'Unripe Puntec Wrap': 15500,
    'Lime Swirly Negg': 15400,
    'Green Negg': 15200,
    'Slorg Biscuits': 15000,
    'Neopets 18th Birthday Cake': 13800,
    'Grapeade': 13400,
    'Breakfast Cake': 13200,
    'Chocolate Covered Toffee': 13000,
    'Waffle Burger': 12800,
    'Grape Juice Sippy Cup': 12100,
    'Caramel Chia Parfait': 12000,
    'Cheddar Kacheek Cheese': 12000,
    'Cheese Rigamaroll': 12000,
    'Cybunny Carrot Stew': 11900,
    'Snot Fries': 11800,
    'Deceptive Soup': 11300,
    'Snotty Vira Onion': 11300,
    'Cheesy Kois': 11000,
    'White Chocolate Asparagus Souffle': 10800,
    'Shell Lollypop': 10400,
    'Strawberry JubJub Sundae': 10400,
    'Apple Rigamaroll': 10000,
    'Raspberry Sundae': 9950,
    'Fancy Rack of Lamb': 9800,
    'Happy Birthday Negg': 9800,
    'Purple Negg': 9800,
    'Quadruple Scoop of Sorbet': 9650,
    'Cookie Negg': 9550,
    'Turkey Dinner': 9500,
    'Kau Ice Lolly': 9450,
    'Squid Sauce': 9400,
    'Pickled Onion': 9300,
    'Chocolate Kau Milk': 9200,
    'Congratulations Negg': 8800,
    'Clam and Meatball Pizza': 8750,
    'White Chocolate Covered Toffee': 8700,
    'Festive Faerie Fizz': 8400,
    'Mosaic Negg': 8300,
    'Buzz Bread Salad': 8200,
    'Dipping Apples': 8200,
    'Neggnog Cheesecake': 8150,
    'Veggie Burger': 8100,
    'Crusty Clam Surprise': 8050,
    'Lettuce Wrap': 8000,
    'Shiver Me Shrimp': 8000,
    'Swirly Chocolate Milk': 8000,
    'Jinjah Maple Mocktail': 7700,
    'Seasoned Curly Chips': 7500,
    'Double Stuffed Guppy': 7400,
    'Gooey Green Shake': 7300,
    'Buzz Dung Cone': 7000,
    'Gingerbread Cookie Box': 7000,
    'Cupid Negg': 6300,
    'Egg Salad Packed Lunch': 6300,
    'Green Scorchipepper': 6200,
    'Star Shaped Cheeseburger': 6200,
    'Tall Stack of Mutant Pancakes': 6000,
    'Sliced Turkey Dinner': 5950,
    'Cheese Sticks': 5450,
    'Chocolate Elephante Doughnut': 5350,
    'JubJub Orange Juice': 5300,
    'Negg': 5200,
    'Valentines Negg': 5200,
    'Continuous Meat': 5150,
    'Hot Dog on a Stick': 5100,
    'Steak Platter': 5050,
    'Apple Walnut Tea Sandwiches': 5000,
    'Cheese and Pickle Packed Lunch': 5000,
    'Cinnamon Neocola': 5000,
    'Deluxe Cheese Fondue': 5000,
    'Doglefox Cookies': 5000,
    'Flotsam Ice Cream Sundae': 5000,
    'Blue Goo Techo Cake': 4900,
    'Ham and Mustard Packed Lunch': 4900,
    'Blueberry Jelly Doughnut': 4700,
    'Exotic Sliced Truffles': 4700,
    'Nimmo Meatloaf': 4675,
    'Dirt Ice Cream': 4500,
    'Red Scorchipepper': 4500,
    'Uni Pie': 4475,
    'Jinjah Ale': 4425,
    'Mighty Grarrl Burger': 4400,
    'Chocolate Gnome Crunch': 4325,
    'Tuskaninny Ice Cream': 4300,
    'Speckled Ice Cream': 4175,
    'Bombshroom': 4150,
    'Orange Baby Aisha Lollypop': 4150,
    'Orange Jetsam Cupcake': 4125,
    'Gooseberry Jam Packed Lunch': 4050,
    'Chokato Sundae': 4000,
    'Fruity Fondue': 4000,
    'Pickled Peppers': 4000,
    'Tonu Cheeseburger': 4000,
    'Turkey Casserole': 4000,
    'Creamy Jello Jigglers': 3975,
    'Number Pasta': 3950,
    'Symol Mouldy Cheese Ball': 3950,
    'Garlic Mashed Potatoes': 3900,
    'Fish Filet Sandwich': 3800,
    'Plain Bagel': 3800,
    'Quiggle Stew': 3800,
    'Symol Cheddar Cheese Ball': 3800,
    'Wormy Jam Sandwich': 3775,
    'Jelly Neocola': 3750,
    'Mayonnaise Chilli and Cheese covered Corn on the Cob': 3750,
    'Spicy Purblare Juice': 3750,
    'Royal Boy Tuskaninny Spaghetti': 3725,
    'Egg and Carrots': 3700,
    'Origami Donut': 3700,
    'Plain Crackers': 3700,
    'Red Buzz Energy Drink': 3700,
    'Sketch Pie': 3700,
    'Dressing and Cranberry Sandwich': 3675,
    'Quiggle Veggie Soup': 3675,
    'Grilled Islandberry Slices': 3650,
    'Skeith Quesadilla': 3650,
    'Chicken With Vegetables': 3625,
    'Filet Mignon': 3600,
    'Fried Potato Balls': 3575,
    'Tchea JubJub Mini Burger': 3550,
    'Tangy Cheesicle': 3500,
    'Xweetok Burger': 3500,
    'Custard': 3475,
    'Orange Filled Jacket Potato': 3475,
    'Blue Acara Cake': 3450,
    'Bug-a-licious Parfait': 3450,
    'Flotato-Stuffed Turkey': 3450,
    'Illusen Lunch Box': 3400,
    'Moehog Milkshake': 3400,
    'Mynci Mushroom Soup': 3400,
    'Purple Crisps': 3400,
    'Sugar Coated Jacket Potato': 3400,
    'Tomato Cannon Ball': 3400,
    'Uh Oh, Spaghetti Eyes': 3400,
    'Forbidden Forever Fruit': 3375,
    'Strawberry Achyfi': 3350,
    'Spicy Kau Burger': 3325,
    'Cheddar Fries': 3300,
    'Watercress Tea Sandwiches': 3300,
    'Sketch Sundae': 3275,
    'Toffee Chocolate Aisha Sundae': 3275,
    'Fresh Durian': 3250,
    'Sketch Sandwich': 3250,
    'Vanilla Flotsam Day Shake': 3250,
    'Hot Fudge Sundae': 3225,
    'Tea Waffles': 3225,
    'Chocolate Drizzled Popcorn': 3200,
    'Grapefruit Biscuits': 3200,
    'Lemint Green Salad': 3200,
    'Pasta Nest': 3200,
    'Techo Garden Salad': 3200,
    'Turkey Enchilada': 3200,
    'Berry Delight': 3175,
    'Chokato Cream Cheese Dip': 3175,
    'Moehog Marmalade': 3175,
    'Borovan Chicken': 3150,
    'Meaty Gnorbu Pie': 3150,
    'Deep-Fried Vegetables': 3125,
    'Bowl of Mushy Peas': 3100,
    'Cheese and Raspberry Plate': 3100,
    'Creamy Sweet Potato Soup': 3100,
    'Peanut Dash Shake': 3100,
    'Dark Chocolate Covered Toffee': 3075,
    'Fresh Borovan and Asparagus Tart': 3075,
    'Apple Achyfi': 3050,
    'Chia Cereal': 3050,
    'Chocolate Poogle Lolly': 3025,
    'Gnorbu Chocolate Pudding': 3025,
    'Aisha Mega Burger': 3000,
    'Blueberry Jelly Twirl': 3000,
    'Chunky Mushroom Soup': 3000,
    'Cucumber Tea Sandwiches': 3000,
    'Cupcake with Rainbow Frosting': 3000,
    'Doglefox Ice Cream Scoops': 3000,
    'Garlicy Mushrooms': 3000,
    'Hearty Pie': 3000,
    'Koi Seaweed Sundae': 3000,
    'Lamb Chop': 3000,
    'Lucky Slothy Day Dip': 3000,
    'Oyster Obsession': 3000,
    'Pepper Lupe Treat': 3000,
    'Plain Onigiri': 3000,
    'Purple Eyrie Jelly Sandwich': 3000,
    'Small Fizzy Drink': 3000,
    'Tea Jelly': 3000,
    'Dorkleshroom': 2975,
    'Raspberry Baby JubJub Lollypop': 2975,
    'CPMPB Salad': 2950,
    'Dirt Achyfi': 2950,
    'Elephante Ice Cream': 2950,
    'Korbat Pasta and Meatballs': 2950,
    'Minty Aisha Sundae': 2950,
    'Symol Extra Cheesy Cheese Ball': 2950,
    'Blueberry Achyfi': 2925,
    'Turkey Leg Pasta': 2925,
    'Bacon Achyfi': 2900,
    'Carrot On A Stick': 2900,
    'Creamy Chicken Dish': 2900,
    'Jhudoras Achyfi': 2900,
    'Speckled Veggie Burger': 2900,
    'Uni Triple Scoop Rainbow Sorbet': 2900,
    'Blumaroo Ice Cream Sundae': 2850,
    'Cheesenana': 2850,
    'CPMPB Pizza': 2850,
    'Cucumber Salad': 2850,
    'Gnome Crunch': 2850,
    'Lupe Burger': 2850,
    'Mushrooms On A Stick': 2850,
    'Sprinkling of Salt': 2850,
    'Left-over Sliced Turkey Sandwich': 2825,
    'Starry Waffle Cone': 2825,
    'Butter Toffee Popcorn': 2800,
    'Cinnamon Apple Chips': 2800,
    'Deluxe Ham Sub': 2800,
    'Disco Toast': 2800,
    'Mini Koi Cereal': 2800,
    'Noil Mashed Potatoes': 2800,
    'Pickled Pears': 2800,
    'Sloth Day Pasta': 2800,
    'Snot Sandwich': 2800,
    'Speckled Candy Floss': 2800,
    'Cheery Tomato Soup Bowl': 2775,
    'Seaweed Bacon': 2775,
    'Banana Grub': 2725,
    'Twirly Fruit Flavoured Milk': 2725,
    'Vanilla Flavoured Borovan': 2725,
    'Acara Rainbow Lollypop': 2700,
    'Blackberry Sorbet': 2700,
    'Coral Delight': 2700,
    'Doglefox Popcorn': 2700,
    'Fancy Star Burger': 2700,
    'Nimmo Veggie Platter': 2700,
    'Teasicle': 2700,
    'Black Cherry Pudding': 2675,
    'Black Cherry Taco': 2675,
    'Boiled Peanut Dash Peanuts': 2675,
    'Dung Negg': 2675,
    'Wocky Spaghetti Ball': 2675,
    'Christmas Wocky Cranberry Meatloaf': 2650,
    'Mutant Milkshake': 2650,
    'Orange Spanner Jelly': 2650,
    'Seasoned Lupe Chips': 2650,
    'Strawberry Cybunny Ice Cream': 2650,
    'Triple Scoop of Sorbet': 2650,
    'Suspicious Borovan Creame Pie': 2625,
    'Beef and Veggie Soup': 2600,
    'Crunchy Buzz Honey Delight': 2600,
    'Gummy Dice Salad': 2600,
    'Pineapple Ham': 2600,
    'Xweetok Vegetable Soup': 2600,
    'Captain Scarblade Crunch Cereal': 2575,
    'Furanga Fruit Sandwich': 2575,
    'Chocolate Milk': 2550,
    'Holiday Yule Log': 2550,
    'JubJub Strawberry Juice': 2550,
    'Open Top Onion Sandwich': 2550,
    'Spaghetti Hot Dog': 2550,
    'Special Breakfast': 2550,
    'Iced Shoyru Meatball': 2525,
    'Aisha Tomato and Potato Soup': 2500,
    'Bubbly Twirly Fruit Juice': 2500,
    'Buzz Honey Pot': 2500,
    'Cheesykraut Hot Dog': 2500,
    'Doglefox Candy Floss': 2500,
    'Filling Skeith Steak': 2500,
    'Jelly Smores': 2500,
    'Kiwi Sorbet': 2500,
    'Mynci Ham and Cheese Sandwich': 2500,
    'Negg Noodle Soup': 2500,
    'Refried Beans and Rice': 2500,
    'Roasted Chestnuts': 2500,
    'Sparkling Twirly Fruit Juice': 2500,
    'Strawberry Chocolate Fondue': 2500,
    'Techo Energy Drink': 2500,
    'Turkey and Chestnut Dressing': 2500,
    'Zafara Breakfast': 2500,
    'Basket of Spaghetti': 2475,
    'Carrot Cupcake': 2475,
    'Cranberry Flavoured Borovan': 2475,
    'Fried Something': 2475,
    'Mutant Doughnut': 2475,
    'Brown Sugar Oatmeal': 2450,
    'Gnorbu Wool Burger': 2450,
    'Gnorbu Wool Candy Floss': 2450,
    'Plate of Crudites': 2450,
    'Shoyru Cereal': 2450,
    'Sparkling Space Cocktail': 2450,
    'BLT Sandwich with Cheese': 2425,
    'Number Crackers and Cheese': 2425,
    'Asparagus and Hollandaise Sauce': 2400,
    'Buzz Sandwich With Honey': 2400,
    'Chocolate Covered Carrot': 2400,
    'Curried Chicken Tea Sandwiches': 2400,
    'Leek Stew': 2400,
    'Orange-Stuffed Turkey with Jam Dressing': 2400,
    'Steel Negg': 2400,
    'Strawberry Jetsam Ice Cream': 2400,
    'Sunflower Pattern Easter Negg': 2400,
    'Turkey Wing Dinner': 2400,
    'Blue Bruce Juice': 2375,
    'Chocolate Chip Gelert Ice Cream Sandwich': 2375,
    'Lemon Lava Cake': 2375,
    'Sand Negg': 2375,
    'Azzle Onigiri': 2350,
    'Deluxe Chocolate Fondue': 2350,
    'Edible Argyle Socks': 2350,
    'Moehog Grilled Peanut Butter Sandwich': 2350,
    'Origami Breakfast': 2350,
    'Turkey Curry': 2350,
    'Chocolate Poogle Cupcake': 2325,
    'Fizzy Grape Lupe Drink': 2325,
    'Kacheek Meatball': 2325,
    'Tako Taco': 2325,
    'Fish Bone Delight': 2300,
    'Fruit Tuskabob': 2300,
    'Orange Bruce Juice': 2300,
    'Pineapple and Broccoli Pie': 2300,
    'Quiggle Fly Pie': 2300,
    'Vanilla Yurblecone': 2300,
    'Rainbow Poogle Lolly': 2275,
    'Extra Meaty Pie': 2250,
    'Ixi Double Veggie Burger': 2250,
    'Rainbow Burger with Cheese': 2250,
    'Sketch Eggs': 2250,
    'Tuna Mayo Onigiri': 2250,
    'Chocolate Aisha Sundae': 2225,
    'Hidden Treasure Pasta': 2225,
    'Tangy Twirly Fruit Soup': 2225,
    'Apple Flavoured Borovan': 2200,
    'Blue Berry Aisha Ice Cream': 2200,
    'Blueberry Crescent Lolly': 2200,
    'Ixi Acorn Meatball': 2200,
    'Korbat Cheese and Crackers': 2200,
    'Lemon Lime Neocola': 2200,
    'Mushroom Sandwich': 2200,
    'Toast on Toast': 2200,
    'Turkey Leg': 2200,
    'Snorkle in a Blanket': 2175,
    'Double Scoop of Sorbet': 2150,
    'Flaming Hot Burger': 2150,
    'Good Popcorn': 2150,
    'Pirate Lupe Pasta': 2150,
    'Purple Pasta': 2150,
    'Raspberry Scones': 2150,
    'Snowy Negg': 2150,
    'Chocolate Nimmo Dessert': 2125,
    'Disco Ice Cream': 2125,
    'Fruity Aisha Sundae': 2125,
    'Gourmet Fried Chicken and Waffles': 2125,
    'Grilled Chicken Sandwich': 2125,
    'Bowl Hominy': 2100,
    'Gnorbu Wool and Jelly Sandwich': 2100,
    'Gnorbu Wool Noodles': 2100,
    'Ham Casserole': 2100,
    'Pea and Carrot-Stuffed Turkey': 2100,
    'Quiggle Grilled Cheese Sandwich': 2100,
    'Corn Horn': 2075,
    'Hot Dog and Fizzy Drink': 2075,
    'Scaled Negg': 2075,
    'Smiley Pancakes': 2075,
    'Starflower Patterned Easter Negg': 2075,
    'Turkey Dumplings': 2075,
    'Baby Shoyru Baby Bottle': 2050,
    'Cheesy Onion Noodle Soup': 2050,
    'Extra Large Fizzy Drink': 2050,
    'Ice Cream Covered Jacket Potato': 2050,
    'Skull Stew': 2050,
    'Strawberry Ice Cream Sandwich': 2050,
    'Rainbow Artichoke': 2025,
    'Strawberry Scorchio Treat': 2025,
    'Barbecued Meat': 2000,
    'Berry Onigiri': 2000,
    'Berry Smore': 2000,
    'Blueberry Jetsam Jelly': 2000,
    'Bori Cheese Sandwich': 2000,
    'Bubbly Harffel Fruit Juice': 2000,
    'Bubbly Roseatte Juice': 2000,
    'Buttery Chomby Waffles': 2000,
    'Carrot': 2000,
    'Chocolate Xweetok Ice Cream Sandwich': 2000,
    'Chokatoade': 2000,
    'Clove Ham': 2000,
    'Deluxe Elephante Burger': 2000,
    'Doughnutfruit Punch': 2000,
    'Dried Squid on a Stick': 2000,
    'Durian Lupe Treat': 2000,
    'Extra Meaty Sandwich': 2000,
    'Fancy Seafood': 2000,
    'Fire Tonic': 2000,
    'Freeze Dried Sausage': 2000,
    'Gourmet Grilled Steak Salad': 2000,
    'Ham and Cheese Mashed Potato': 2000,
    'Hannah Lunch Box': 2000,
    'Jhudora Eyeball Pasta': 2000,
    'Kacheek Cheeseburger': 2000,
    'Meerca Fruit Burger': 2000,
    'Melowhirl Juice': 2000,
    'Mutant Toast': 2000,
    'Pat of Butter': 2000,
    'Pickled Apples': 2000,
    'Pumpkin Eyrie Souffle': 2000,
    'Radish': 2000,
    'Sausage and Chips': 2000,
    'Skeith Burger': 2000,
    'Sloth Day Soup': 2000,
    'Sparkling Flatfruit Juice': 2000,
    'Strawberry Blumaroo Cone': 2000,
    'Sugar Coated Apple Fritters': 2000,
    'Tofu Pumpkin': 2000,
    'Twirly Fruit Cream Cheese Dip': 2000,
    'Vanilla Poogle Cupcake': 2000,
    'Vegan Turkey Dinner': 2000,
    'White Cheddar Jetsam Fin Crackers': 2000,
    'Wocky Veggies and Dip': 2000,
    'Boiled Egg': 1975,
    'Bubbly Rhuby Fruit Juice': 1975,
    'Chocolate Peanut Butter Bagel': 1975,
    'Fruit Punch Roll': 1975,
    'Tonu Sorbet': 1975,
    'Chocolate Lupe Ice Cream': 1950,
    'Cranberry Fog Drink': 1950,
    'Cream of Tchea Soup': 1950,
    'Ink Pasta': 1950,
    'Lussion Fruit': 1950,
    'Sour Cream Chomby Crisps': 1950,
    'Strawberry Gelert Shake': 1950,
    'Cheddar and Screlon Plate': 1925,
    'Kadoatie Puffs': 1925,
    'Mynci Steak': 1925,
    'Slice of Zafara Pizza': 1925,
    'Sparkling Pink New Year Juice': 1925,
    'Acara Day Burger': 1900,
    'Acara Day Spaghetti': 1900,
    'Bubbling Blueberry Cheese Wedge': 1900,
    'Cheesecake Salad': 1900,
    'Corn Chowder Soup Bowl': 1900,
    'Custard Cheesecake': 1900,
    'Egg Hot Dog': 1900,
    'Florg Os Cereal': 1900,
    'Flowers and Coffee': 1900,
    'French Toast': 1900,
    'Goldy Crackers': 1900,
    'Green Oat Cereal': 1900,
    'Honey Nut Pebbles': 1900,
    'Marshmallow Yam Soup': 1900,
    'Peanut': 1900,
    'Pink Cheese': 1900,
    'Poogle Spaghetti': 1900,
    'Red Bruce Juice': 1900,
    'Sparkling Sroom Fruit Juice': 1900,
    'Spicy BBQ Chomby Crisps': 1900,
    'Spinach Eyrie Souffle': 1900,
    'Veggie Delight Jetsam Fin Crackers': 1900,
    'Wocky Pot Pie': 1900,
    'Grilled Asparagus': 1875,
    'Grilled Cheese Soup Dippers': 1875,
    'Lenny Strawberry Ice Cream': 1875,
    'Shishkafruit Jam': 1875,
    'Strawberry Ixi Fizzy Drink': 1875,
    'Aisha Cucumber Riceball': 1850,
    'Beans on Toast': 1850,
    'Cheesy Mashed Potato': 1850,
    'Cherry Mynci Burger': 1850,
    'Christmas Quiggle Lettuce and Tomato Wrap': 1850,
    'Extra Sour Seedless Skeem Jam': 1850,
    'Kacheek Marshmallows on a Stick': 1850,
    'Mutant Hot Dog': 1850,
    'Nimmo Sheppards Pie': 1850,
    'Plushie Broccoli': 1850,
    'Starry Taco': 1850,
    'Water Cake': 1850,
    'Florg Burger': 1825,
    'Nutty Spaghetti': 1825,
    'Bottle of Water': 1800,
    'Bursting Water Muffin': 1800,
    'Cheesy Slorgwich': 1800,
    'Chocolatey Pork Chops': 1800,
    'Date Milkshake': 1800,
    'Fancy Sundae': 1800,
    'Fish Burger': 1800,
    'Fried Salmon': 1800,
    'Grarrl Macaroni': 1800,
    'Hot Strawberry Soup': 1800,
    'Korbat Tea Sandwiches': 1800,
    'Meaty Chia Soup': 1800,
    'Mild Cheddar Jetsam Fin Crackers': 1800,
    'Pant Devil Lunch Box': 1800,
    'Peach Milkshake': 1800,
    'Peanut Butter Bone': 1800,
    'Plain Shoyru Meatball': 1800,
    'Poogle Sushi': 1800,
    'Quiggle Pasta Salad': 1800,
    'Raspberry Yurblecone': 1800,
    'Steamed Dumplings': 1800,
    'Symol White Cheddar Cheese Ball': 1800,
    'Turkey Steak Dinner': 1800,
    'Vanilla Aisha Pudding': 1800,
    'Cheese Negg': 1775,
    'Chicken Taquitos': 1775,
    'Grilled Ummagine': 1775,
    'Peanut Butter and Jelly Hot Dog': 1775,
    'Pear': 1775,
    'Royal Girl Zafara Pancakes': 1775,
    'Thing Rolls': 1775,
    'Turkey Salad': 1775,
    'Checkered Carrot': 1750,
    'Chicken Dumpling Soup': 1750,
    'Dirt Burgers': 1750,
    'Grey Peach Pie': 1750,
    'Hot Buzz Pie': 1750,
    'Kale': 1750,
    'Korbat Veggie Plate': 1750,
    'Peanut Butter Tonu Crackers': 1750,
    'Soba Noodles': 1750,
    'Turkey Pie': 1750,
    'Aisha Day Soup': 1725,
    'Carrot Salad': 1725,
    'Chiazilla Quesadilla': 1725,
    'Chomby Hot Dog': 1725,
    'Deceptive Salad': 1725,
    'Harvest Soup Bowl': 1725,
    'Sour Apple Ixi Fizzy Drink': 1725,
    'Bitten Red Apple': 1700,
    'Black Cherry Ixi Drink': 1700,
    'Cheese': 1700,
    'Cheesy Jetsam Sandwich': 1700,
    'Chocolate Chomby Ice Cream Sandwich': 1700,
    'Eyrie Meatloaf': 1700,
    'Lenny Casserole': 1700,
    'Lutari Pancakes': 1700,
    'Spaghetti A La Kacheek': 1700,
    'Sparkling Blue New Year Juice': 1700,
    'Vanilla JubJub Sundae': 1700,
    'Xweetok Sugar Cookies': 1700,
    'Xweetok Veggie Crepe': 1700,
    'Kacheek Pretzels': 1675,
    'Pastrami Milkshake': 1675,
    'Potato-Stuffed Turkey': 1675,
    'Strawberry Milkshake': 1675,
    'Aisha Riceball with Meat': 1650,
    'Chip Butty with Tomato Sauce': 1650,
    'Delicious Ruki Crackers': 1650,
    'Extra Large Xweetok Sushi': 1650,
    'Flaming Chocolate Cake': 1650,
    'Mutant Asparagus': 1650,
    'Onion Bagel': 1650,
    'Orapple Fizz': 1650,
    'Peanut Crunch Cereal': 1650,
    'Poogle Pot Pie': 1650,
    'Rainbow Toast with Rainbow Jam': 1650,
    'Salmon Cream Cheese Dip': 1650,
    'Sloth Day Nachos': 1650,
    'Jammy Kyrii Sandwich': 1625,
    'Neocrunch Cereal': 1625,
    'Orange Flavored Ribs': 1625,
    'Strawberry Oatmeal': 1625,
    'Yurble Steak': 1625,
    'Checkered Burger': 1600,
    'Chokato Chew': 1600,
    'Dried Chilli Peppers': 1600,
    'Honey Glazed Ham': 1600,
    'Jhudora Day Ice Cream': 1600,
    'Lime Usul Shake': 1600,
    'Meerca Cinnamon Bun': 1600,
    'Number Jelly Parfait': 1600,
    'Whole Wheat Jetsam Fin Crackers': 1600,
    'Yamless Candied Yams': 1600,
    'Caramel Flavoured Kougra Milk': 1575,
    'Crimson Ham': 1575,
    'Lemon and Orange Blend': 1575,
    'Number Fruit Leather': 1575,
    'Plain Sloth Day Burger': 1575,
    'Popcorn': 1575,
    'Vegetarian Usul Wrap': 1575,
    'Borovan Cookies': 1550,
    'Bran Boulders': 1550,
    'Celery Salad': 1550,
    'Delicious Custard Brulee': 1550,
    'Freeze Dried Meat': 1550,
    'Gnorbu Sushi': 1550,
    'Orange Uni Sherbert Sundae': 1550,
    'Peanut Butter Smores': 1550,
    'Plushie Turkey': 1550,
    'Skeith Crisps': 1550,
    'Taco Salad': 1550,
    'Tigerbuggle JubJub Mini Burger': 1550,
    'Uni Corn': 1550,
    'Double Chicken Leg': 1525,
    'Jhudora Day Burger': 1525,
    'Wheaty Sloth Day Burger': 1525,
    'Baked Apple Jacket Potato': 1500,
    'Banana Achyfi': 1500,
    'Borovan Pavlova': 1500,
    'Caesar Salad': 1500,
    'Cantaloupe Melon': 1500,
    'Carnapepper Soup': 1500,
    'Checkered Cake': 1500,
    'Cheese and Tonu Crackers': 1500,
    'Chicken Curry': 1500,
    'Chocolate Custard': 1500,
    'Chomby Day Potato Soup': 1500,
    'Cole Slaw': 1500,
    'CPMPB Sandwich': 1500,
    'Extra Crispy Bacon Gum': 1500,
    'Fancy Waffles': 1500,
    'Garlic Kebab': 1500,
    'Gelert Sticky Rice Cake': 1500,
    'Gooey Jetsam Sandwich': 1500,
    'Grarrl Crackers': 1500,
    'Grey Ice Cream Cone': 1500,
    'Grootafruit Punch': 1500,
    'Hairy Fungus Salad': 1500,
    'Hot Fruit Soup': 1500,
    'Kacheek Sticky Rice Cake': 1500,
    'Kacheek Vanilla Pudding': 1500,
    'Lemonade': 1500,
    'Marble Cake': 1500,
    'Mint Chocolate Chip JubJub Sundae': 1500,
    'Mushroom and Herb Salad': 1500,
    'Mutant Cheese Pizza Slice': 1500,
    'Neopia Central Chocolate Milk Glass': 1500,
    'Peanut Butter &amp; Jelly Waffle Sandwich': 1500,
    'Peanut Butter and Honey Sandwich': 1500,
    'Rangamelon': 1500,
    'Raspberry Aisha Waffle': 1500,
    'Raspberry Chicken': 1500,
    'Red Apple': 1500,
    'Skeith Sundae': 1500,
    'Split Pea Soup Bowl': 1500,
    'Sweet and Sour Soup': 1500,
    'Tigerbuggle Jacket Potato': 1500,
    'Tofukabob': 1500,
    'Turkey Croquettes': 1500,
    'Two Garlic Bulbs': 1500,
    'Vanilla Blumaroo Cone': 1500,
    'Vanilla Waffle Cone': 1500,
    'Veggie Tuskabob': 1500,
    'Wintermelon': 1500,
    'Xweetok Bologna Sandwich': 1500,
    'Chocolate JubJub Sundae': 1475,
    'Coconut and Gooseberry Achyfi': 1475,
    'Communal Meatloaf': 1475,
    'Pineapple and Oranges': 1475,
    'Potato Wedges': 1475,
    'Purple Hamburger': 1475,
    'Seared Salmon Sandwich': 1475,
    'Berry Xweetok Ice Cream': 1450,
    'Blueberry and Chokato Achyfi': 1450,
    'Gelert Day Cereal': 1450,
    'Lenny Mint Chocolate Chip Ice Cream': 1450,
    'Minty Blumaroo Cone': 1450,
    'Peanut Dash Cookie': 1450,
    'Tarragon Achyfi': 1450,
    'Tentacle Cupcake': 1450,
    'Wishbone Delight': 1450,
    'Inkade': 1425,
    'Lutical Berries': 1425,
    'Raspberry Basket': 1425,
    'Shoyru Spaghetti': 1425,
    'Techo Meat Pie': 1425,
    'Tropical Fruit Smoothie': 1425,
    'A Smatter of Mustard': 1400,
    'Black Currant Milkshake': 1400,
    'Carrot Cone': 1400,
    'Cheese Stuffed Mushrooms': 1400,
    'Cheesy Onion Sticks': 1400,
    'Chomby Meatloaf': 1400,
    'Eggy Weggs': 1400,
    'Elephante Milkshake': 1400,
    'Flaming Hot Chips': 1400,
    'Haaaarrd Boiled Egg': 1400,
    'Iced Lutari Cookie': 1400,
    'Ixi Bagel': 1400,
    'Jicama': 1400,
    'Mynci Cristo Sandwich': 1400,
    'Omelette with Cream Sauce': 1400,
    'Pea and Ham Baby Food': 1400,
    'Spring Onion': 1400,
    'Zafara Gruel': 1400,
    'Cheesy Popcorn': 1375,
    'Pastrami Gormball Sandwich': 1375,
    'Potato Chips on a Paper Plate': 1375,
    'Flaming Blooble Fruit Juice': 1350,
    'Fried Eggs and Scallion Tortillas': 1350,
    'Grey Ice Cream': 1350,
    'Honeydew Melon': 1350,
    'Lemon': 1350,
    'Lime Yurblecone': 1350,
    'Orange Yurblecone': 1350,
    'Pteri Wrap': 1350,
    'Ruki Juicebox': 1350,
    'Aisha Radish Riceball': 1325,
    'Starry Gelert Pie': 1325,
    'Tropical Breeze': 1325,
    'Zafara Vegetable Croissant': 1325,
    'Aisha Ice Cream': 1300,
    'Blue Cheese and Tchea Plate': 1300,
    'Creamy Carrot Trifle': 1300,
    'Fizzy Apple Juice': 1300,
    'Gnorbu Salad': 1300,
    'Golden Tangerines': 1300,
    'Grey Cheese': 1300,
    'Hot Doughnutfruit Juice': 1300,
    'Kau Kau Farm Cheese Wedge': 1300,
    'Lime': 1300,
    'Lime Ice Cream': 1300,
    'Meat and Potatoes Krawk Pot': 1300,
    'Meatball Toasty': 1300,
    'Raspberry Cranberry Juice': 1300,
    'Scrumptious Borovan Cookie': 1300,
    'Strawberry Flotsam Day Shake': 1300,
    'Chocolate Coated Pear': 1275,
    'Chokato Toasty': 1275,
    'Flaming Hot Meat Taco': 1275,
    'Iced Berry Water': 1275,
    'Invisible Negg': 1275,
    'Plushie Slice of Cake': 1275,
    'Raspberry Milkshake': 1275,
    'Ruki Veggie Sandwich': 1275,
    'Tchea Shoyru Ice Cream': 1275,
    'Water Burger': 1275,
    'Blooble and Cheese Plate': 1250,
    'Carnapepper Finger Sandwiches': 1250,
    'Cheery Tomatoes': 1250,
    'Chips and Egg': 1250,
    'Cinnamon Toasties': 1250,
    'Crunchy Carrot Burger': 1250,
    'Dewy Apple Sandwich': 1250,
    'Grey Doughnutfruit': 1250,
    'Moehog Salad': 1250,
    'Pteri Burger': 1250,
    'Spicy Peophin Burger': 1250,
    'Spotted Ice Cream': 1250,
    'Tabouleaf': 1250,
    'Xweetok Hot Chocolate': 1250,
    'Carrot Fizz Achyfi': 1225,
    'El Champion': 1225,
    'Large Tonu Day Burger': 1225,
    'Lemint Pizza Slice': 1225,
    'Phear Flavoured Milk': 1225,
    'Shoyru Parfait': 1225,
    'Square Marshmallows': 1225,
    'Banana Sundae': 1200,
    'Black Cherry Ice Lolly': 1200,
    'Brightvale Rigamaroll': 1200,
    'Chestnut Shortcake': 1200,
    'Chocolate Covered Apple': 1200,
    'Chocolate Techo Cookie': 1200,
    'Flotsam Flakes': 1200,
    'Glowing Green Soup': 1200,
    'Gruel Ice Lolly': 1200,
    'Kiwi': 1200,
    'Krawk Apple Cake': 1200,
    'Lemint Muffin': 1200,
    'Limeade': 1200,
    'Lupe Snowcone': 1200,
    'Lupe Soup': 1200,
    'Lychee': 1200,
    'Mega Carrot Pie': 1200,
    'Mynci Veggie Plate': 1200,
    'Myncironi and Cheese': 1200,
    'Neggdrop Soup': 1200,
    'Shell Burger': 1200,
    'Snow Lemon': 1200,
    'Space Station Chocolate Milk Glass': 1200,
    'Sparkling Suti Fruit Juice': 1200,
    'Squid Spaghetti': 1200,
    'Stone Veggie Gormball Sandwich': 1200,
    'Strawberry Waffle Cone': 1200,
    'Tiger Shoyru Ice Cream': 1200,
    'Warm Transparaberry Cocktail': 1200,
    'Wheaty Kyrii Sandwich': 1200,
    'Bowl of Wocky Day Soup': 1175,
    'Cup of Tea': 1175,
    'Ogrin Pasta': 1175,
    'Peanut Butter Toast': 1175,
    'Yurble Pot Pie': 1175,
    'Bacon Tape': 1150,
    'Brightly Coloured Easter Negg': 1150,
    'Cherimoya': 1150,
    'Draik Steak': 1150,
    'Lawyerbrat': 1150,
    'Multi-scoop Ice Cream': 1150,
    'Paper-Wrapped Salmon': 1150,
    'Pink Triple Decker Sandwich': 1150,
    'Pteri Kabob': 1150,
    'Salmon Steak': 1150,
    'Sausage Jacket Potato': 1150,
    'Twirly Fruit Shoyru Ice Cream': 1150,
    'Dried Gruel Capsules': 1125,
    'Krawk Brand Crisps': 1125,
    'Leafy Slorgwich': 1125,
    'Scorched Kabob': 1125,
    'Spicy Salsa Jacket Potato': 1125,
    'Tchea Toasty': 1125,
    'Apple Juice': 1100,
    'Broccoli': 1100,
    'Bubble Negg': 1100,
    'Bubbling Blue Soup': 1100,
    'Buttered Popcorn': 1100,
    'Butterscotch Milkshake': 1100,
    'Caffeine Free Neocola': 1100,
    'Carrots in Salad': 1100,
    'Cheese and Tomato Muffin': 1100,
    'Cheesy Shoyru Meatball': 1100,
    'Chocolate Covered Tomato': 1100,
    'Chocolate Techo Foot': 1100,
    'Chokato Mash Jacket Potato': 1100,
    'Chomate Triple Decker': 1100,
    'Chomby Tail Burger': 1100,
    'Creamed Corn': 1100,
    'Draik Salad': 1100,
    'Eggs Benedict': 1100,
    'Felberry Gormball Sandwich': 1100,
    'Flaming Hot Pizza': 1100,
    'Fresh Chicken Broth': 1100,
    'Fruit Basket': 1100,
    'Gamaberry Stuffed Jacket Potato': 1100,
    'Giant Grarrl Burger': 1100,
    'Gnocchi Beef Stew': 1100,
    'Hot Munuberry Juice': 1100,
    'Iced Kougra Coffee': 1100,
    'Lupe Sticky Rice Cake': 1100,
    'Orange Gnorbu Cake': 1100,
    'Oysters on a Half Shell': 1100,
    'Persicot': 1100,
    'Pomegranate': 1100,
    'Potato Omelette Sandwich': 1100,
    'Sausage Cornucopia': 1100,
    'Shoyru Winged Sandwich': 1100,
    'Sroom Fruit Sandwich': 1100,
    'Thick Chocolate Soup': 1100,
    'Tonu Tonic Water': 1100,
    'Zesty Zafara Burrito': 1100,
    'Edible Orange Socks': 1075,
    'Grilled Doughnutfruit': 1075,
    'Kau Kau Farm Cheddar Cheese Brick': 1075,
    'Kougra Day Burger': 1075,
    'Raspberry JubJub Mini Burger': 1075,
    'A Smatter of Mayo': 1050,
    'Draik Wrap': 1050,
    'Grapefruit Neocola': 1050,
    'Lunch Cereal': 1050,
    'Meat Tuskabob': 1050,
    'Meerca Sundae': 1050,
    'Mynci Vegetable Soup': 1050,
    'Paper-Wrapped Chicken': 1050,
    'Potato Salad': 1050,
    'Skeith Fizzy Drink': 1050,
    'Spotted Kau Sundae': 1050,
    'Tangella Sandwich': 1050,
    'Tangy Peophin Burger': 1050,
    'Blumaroo Burrito': 1025,
    'Deli Turkey Slices': 1025,
    'Giblets Gravy': 1025,
    'Hot Banana Soup': 1025,
    'Hot Lime Jelly': 1025,
    'Lemon and Thornberry Jelly': 1025,
    'Plain Cheesicle': 1025,
    'Quadruple Fudge Cheese Wedge': 1025,
    'Split Pea Lupe Soup': 1025,
    'Starfish Cake': 1025,
    'Strawberry and Lime Achyfi': 1025,
    'White Chocolate Rice': 1025,
    'Acara Day Pancakes': 1000,
    'Achyfi Ice': 1000,
    'Baked Juppie': 1000,
    'Blackberry Elephante Sundae': 1000,
    'Blueberry Jelly Draik Head': 1000,
    'Bori Bowl of Fruit': 1000,
    'Buzz Meatloaf': 1000,
    'Cabbage Taco': 1000,
    'Can of Sausages': 1000,
    'Caramel Coated Pear': 1000,
    'Cheese Spread on a Plank': 1000,
    'Chestnut Soup': 1000,
    'Chilli Chia Hot Sauce': 1000,
    'Chocolate Coated Flies': 1000,
    'Chocolate Green Tea Parfait': 1000,
    'Chocolate Ixi Ice Cream Sandwich': 1000,
    'Chokato JubJub Mini Burger': 1000,
    'Chomby Chips': 1000,
    'Clam Linguine': 1000,
    'Crunchy Quiggles': 1000,
    'Cup of Wocky Day Soup': 1000,
    'Deep-Fried Okra': 1000,
    'Delicious Borovan Crepe': 1000,
    'Durian Biscuit': 1000,
    'Eyrie Gumbo': 1000,
    'Eyrie Sushi': 1000,
    'Fire Fondue': 1000,
    'Firefish Basket': 1000,
    'Fish Egg Basket': 1000,
    'Florg Nachos': 1000,
    'Gobi Fruit Sandwich': 1000,
    'Gooseberry Tuskaninny Ice Cream': 1000,
    'Grarrl Breakfast Platter': 1000,
    'Grilled Chokato on Toast': 1000,
    'Hot Blunella Punch': 1000,
    'Jetsam Apple Cake': 1000,
    'Jumbo Pea Sandwich': 1000,
    'Kiwi Milkshake': 1000,
    'Krawk Ice Cream Sandwich': 1000,
    'Kyrii Dewy Apple Milkshake': 1000,
    'Lava Bread': 1000,
    'Lava Bread Bowl': 1000,
    'Left-Over Turkey Steak Sandwich': 1000,
    'Lemint Custard': 1000,
    'Lenny Cream of Onion Soup': 1000,
    'Lenny Meaty Burger': 1000,
    'Lenny Vegetable Soup': 1000,
    'Lime Sorbet': 1000,
    'Liver Poogle Pate': 1000,
    'Marshmallow Milkshake': 1000,
    'Meridellian Chocolate Milk Glass': 1000,
    'Mini Cheddar Kau Cheese Wheel': 1000,
    'Minty Flotsam Day Shake': 1000,
    'Mocha Smore': 1000,
    'Moehog Veggie Sandwich': 1000,
    'Mynci Banana Split': 1000,
    'Nachos With Cheese': 1000,
    'Neopian Jambalaya': 1000,
    'Nimmo Day Sandwich': 1000,
    'Numbers and Shapes Soup': 1000,
    'Oatmeal Raisins': 1000,
    'Ogrin Fruit Salad': 1000,
    'Ogrin Peanut Butter and Jelly Sandwich': 1000,
    'Onion Shoyru Meatball': 1000,
    'Peanut Butter Crackers': 1000,
    'Plushie Burger': 1000,
    'Pyranegg': 1000,
    'Quiggle Foot Wrap': 1000,
    'Raspberry Blumaroo Cone': 1000,
    'Refreshing Peophin Burger': 1000,
    'Rhubarb Casserole': 1000,
    'Sakhmetian Grape Sandwich': 1000,
    'Salisbury Steak': 1000,
    'Sausage Gravy': 1000,
    'Savoury Cheese Draik Head': 1000,
    'Scorchipepper Jacket Potato': 1000,
    'Shark Sandwich': 1000,
    'Shenkuu Chocolate Milk Glass': 1000,
    'Shrimp Spaghetti': 1000,
    'Sketch Loaf': 1000,
    'Sliced Turkey Breast': 1000,
    'Spotted Gelert Sundae': 1000,
    'Spotted Kau Ice Cream': 1000,
    'Spotted Kau Sandwich': 1000,
    'Square Eggs': 1000,
    'Steamed Round Dumplings': 1000,
    'Strawberry Nimmo Ice Lolly': 1000,
    'Suti Jam Triple Decker': 1000,
    'Tea Infuser': 1000,
    'Techo Foot Sandwich': 1000,
    'Terror Mountain Chocolate Milk Glass': 1000,
    'Thistle Shoyru Ice Cream': 1000,
    'Thistleberry Tuskaninny Ice Cream': 1000,
    'Thornberry Gormball Sandwich': 1000,
    'Tigerbuggle Tuskaninny Ice Cream': 1000,
    'Tofu Poogle Pate': 1000,
    'Tuskaninny Veggieloaf': 1000,
    'Twirly Fruit Juice': 1000,
    'Uni Breadsticks': 1000,
    'Vanilla Skeith Cone': 1000,
    'Vegetarian Kyrii Sandwich': 1000,
    'Vegetarian Tonu Day Burger': 1000,
    'Blue Swirl Cheesicle': 990,
    'Chocolate Elephante Sundae': 990,
    'Egg Roll': 990,
    'Freeze Dried Bacon': 990,
    'Fresh Basil Soup': 990,
    'Gruel Pizza': 990,
    'Lemberry Chia Jelly': 990,
    'Mint Chocolate Chip Smore': 990,
    'Mynci Delight': 990,
    'Shadow Usul Lunch Box': 990,
    'Striped Gelert Ham and Cheese Sandwich': 990,
    'Twirly Fruit Toasty': 990,
    'Blackberry Sundae': 980,
    'Blueberry and Orange Blend': 980,
    'Cheese Tortilla': 980,
    'Crunchy Kacheek Cereal': 980,
    'Cybunny Candy Floss': 980,
    'Flaming Hot Custard': 980,
    'Fresh Turnip Sandwich': 980,
    'Paper Negg': 980,
    'Peanut Butter and Jam Sandwich': 980,
    'Pickled Onions': 980,
    'Scorchio Melted Cheese Sandwich': 980,
    'Seaweed Wrapped Cake': 980,
    'Shoyru Breakfast': 980,
    'Uni Crisps': 980,
    'Artichoke Ice Pop': 970,
    'Fresh Lemint Juice': 970,
    'Left-Over Turkey Drumstick Sandwich': 970,
    'Meatless Meatballs': 970,
    'Mini Kau Cheese Wheel': 970,
    'Slimey Slorgwich': 970,
    'Veal Parmesan Gormball Sandwich': 970,
    'A Smatter of Butter': 960,
    'Chocolate and Asparagus Achyfi': 960,
    'Flotsam Kelp Shake': 960,
    'Kau Cupcake': 960,
    'Checkered Ice Cream': 950,
    'Crab Spaghetti': 950,
    'Dung Ice Cream': 950,
    'Fresh Green Salad': 950,
    'Kyrii Jumbleberry Milkshake': 950,
    'Mayonnaise Artichoke': 950,
    'Raspberry Achyfi': 950,
    'Rose Petal Crisps': 950,
    'Sketch Cake': 950,
    'Tomato Shoyru Meatball': 950,
    'Baked Chomby Crisps': 940,
    'Cherry Xweetok Cupcake': 940,
    'Gnorbu Burger': 940,
    'Joint of Ham': 940,
    'Mini Ice Cream': 940,
    'Neopolitan Milkshake': 940,
    'Uni Sushi': 940,
    'Chocomalt Milkshake': 930,
    'Hash Browns': 930,
    'Lime Ruki Sundae': 930,
    'Mega Tonu Day Burger': 930,
    'Mouldy Mini Kau Cheese Wheel': 930,
    'Orange Flavoured Borovan': 930,
    'Single Scoop of Sorbet': 930,
    'Sketch Roast Chicken': 930,
    'What the Aisha Dragged In': 930,
    'Broccoli Achyfi': 920,
    'Chocolate Covered Strawberries': 910,
    'Bubbling Bori Beverage': 900,
    'Carrot Lupe Treat': 900,
    'Cheesy Kyrii Sandwich': 900,
    'Cherry Carrot Ice Cream': 900,
    'Chicken Tuskabob': 900,
    'Chokato Rigamaroll': 900,
    'Chomby Juice': 900,
    'Citrus Usul Shake': 900,
    'Cranberry Turkey Sandwich': 900,
    'Dirt Cheese': 900,
    'Dried Lupe Snack': 900,
    'Elephante Chicken Nuggets': 900,
    'Elephante Salad': 900,
    'Fortune Cookie': 900,
    'Fried Shrimp': 900,
    'Gnome Crunch Deluxe Cereal': 900,
    'Harffel Flavoured Milk': 900,
    'Mixed Grarrl Salad': 900,
    'Morel Mushroom Dip': 900,
    'Ogrin Meatballs': 900,
    'Orange Ixi Drink': 900,
    'Raspberry Jelly Draik Head': 900,
    'Real Cheese Cheesecake': 900,
    'Seaweed Bacon Jacket Potato': 900,
    'Strawberry Parfait': 900,
    'Toast': 900,
    'Tomato Omurice': 900,
    'Vanilla Elephante Sundae': 900,
    'Zafara Veggie Stew': 900,
    'Egg Stew': 890,
    'Left-Over Turkey Wing Sandwich': 890,
    'Thornberry Bagel': 890,
    'Cybunny Pancakes': 880,
    'Fresh Popcorn': 880,
    'Juicee': 880,
    'Neo Taco': 880,
    'Olive Cupcake': 880,
    'Paper-Wrapped Veggies': 880,
    'Sketch Cheese': 880,
    'Slug Flakes': 880,
    'Flaming Hot Chilli Bowl': 870,
    'Moehog Fruit Leather': 870,
    'Yooyuball Pizza': 870,
    'Flaming Hot Burrito': 860,
    'Borovan Brownies': 850,
    'Chocolate Chip Zafara Cookie': 850,
    'Chocolate Dipped Ruki Lolly': 850,
    'Edible Purple Socks': 850,
    'Egg Pate': 850,
    'Fruity Usul Acorns': 850,
    'Mynci Vegetable Burger': 850,
    'Orange Lupe Treat': 850,
    'Partially Eaten Chocolate Buzz Dessert Platter': 850,
    'Pear Lollypop': 850,
    'Stormy Negg': 850,
    'Vanilla Gnorbu Cupcake': 850,
    'Aisha Chocolate Cheesecake': 840,
    'Funky Carrot': 840,
    'Mini Swiss Kau Cheese Wheel': 840,
    'Mint Chip Skeith Cone': 840,
    'Snow Garlic': 840,
    'Sparkling Draik Cake': 840,
    'Baby Kougra Custard': 830,
    'Clown Chia Zeenana Ice Cream': 830,
    'Gruel Sandwich': 830,
    'Jhudora Day Soup': 830,
    'Portobello Platter': 830,
    'Nimmo Bubbly Surprise': 820,
    'Camouflage Hot Dog': 810,
    'Berry Buzz Ice Cream': 800,
    'Black Cherry Sundae': 800,
    'Cheese Covered Pretzel': 800,
    'Chia Cheese Blintz': 800,
    'Chocolate Carrot Sundae': 800,
    'Deep-Fried Mac-n-Cheese Loaf': 800,
    'Draik Soup': 800,
    'Fishy Poogle Pate': 800,
    'Granola Parfait': 800,
    'Grapefruit': 800,
    'Hammy Cheese Wedge': 800,
    'Jar Of Flies': 800,
    'Plain Eyrie Souffle': 800,
    'Raspberry Neocola': 800,
    'Rice Dice': 800,
    'Sausage and Cheese Roll': 800,
    'Scorchio Ham Sandwich': 800,
    'Spotted Cheese Sandwich': 800,
    'Starry Star Burger': 800,
    'Tea Biscuits': 800,
    'Two Bottles of Water': 800,
    'Xweetok Spaghetti': 800,
    'Aisha Hot Chocolate': 790,
    'Corned Beef on Rye': 790,
    'Orange Roll': 790,
    'Spinach Alfredo Omurice': 790,
    'Vegetable Quiggle Sandwich': 790,
    'Peanut Butter and Banana Sandwich': 780,
    'Prickly Merato Sandwich': 780,
    'Kyrii Florange Milkshake': 760,
    'A Dozen Neggs': 750,
    'Apricot Gnorbu Juice': 750,
    'Bori Veggie Special': 750,
    'Cheese Xweetok': 750,
    'Deep-Fried Candy Floss': 750,
    'Durian Custard': 750,
    'Durian Pie': 750,
    'Grarrl Cheese Slices': 750,
    'Ham': 750,
    'Snotty Spaghetti': 750,
    'Veggie Poogle Pate': 750,
    'Caviar Sandwich': 740,
    'Snow Enchiladas': 740,
    'Florg Ice Cream': 730,
    'Orange Juice': 730,
    'Spotted Chocolate Jetsam Sandwich': 730,
    'Bacon Muffin': 700,
    'Chocolate Deluxe Flotsam Day Shake': 700,
    'Chokato Crisps': 700,
    'Coffee Milkshake': 700,
    'Draik Cracker Sandwich': 700,
    'Grarrlnola Bar': 700,
    'Hot Cakes': 700,
    'Hot Meerca Tea': 700,
    'Jalapeno Popper': 700,
    'Leek': 700,
    'Peach Ice Cream': 700,
    'Rambus Salad Sandwich': 700,
    'Watermelon': 700,
    'Zafara Orange Juice': 700,
    'Lenny Veggie Burger': 690,
    'Lime Achyfi': 690,
    'Screlon Gormball Sandwich': 690,
    'Cheesy Krawk Sandwich': 680,
    'Seared Tuna Steak': 680,
    'Fried Egg': 670,
    'Kiwi and Cucumber Sandwich': 670,
    'Checkered Steak': 650,
    'Chips and Gravy': 650,
    'Cinnamon Toasties Blast': 650,
    'Grilled Negg': 650,
    'Honey Coated Apple Slices': 650,
    'Peanut Butter and Jelly Gormball Sandwich': 650,
    'Scarab Negg': 650,
    'Spicy Wings': 650,
    'Sprinkling of Black Pepper': 650,
    'Apple Neocola': 640,
    'Chokato Omurice': 640,
    'Pineapple': 640,
    'Tonu Orange Juice': 640,
    'Bagel and Egg Sandwich': 630,
    'Cream Cheese Dip': 630,
    'Spicy Tomato Soup': 630,
    'Blended Pipper': 620,
    'Juppie Cheese Wedge': 620,
    'Nimmo Cream Cakes': 620,
    'Straw Cubes': 610,
    'Blue Cheese Draik Head': 600,
    'Butternut Ravioli': 600,
    'Creamy Carrot Soup': 600,
    'Crispy Crunchy Cookies Cereal': 600,
    'Flaming Hot Banana': 600,
    'Kau Kau Farm Half And Half': 600,
    'Mango': 600,
    'Spotty Cheese Wedge': 600,
    'Strawberry Ice Cream': 600,
    'Tofu Bone': 600,
    'Tomato': 600,
    'Ultimate Burger': 600,
    'Vanilla Gelert Ice Cream Sandwich': 600,
    'Chocolate Waffle Cone': 590,
    'Cream Cheese Pretzel Bites': 590,
    'Deep-Fried Fried Fishsticks': 590,
    'Garlic Bread Halves': 590,
    'Giant Chocolette': 590,
    'Mynci Vegetable Melt Sandwich': 590,
    'A Smatter of Ketchup': 580,
    'Guava Roll': 580,
    'JubJub Blueberry Juice': 580,
    'Strawberry Usul Shake': 580,
    'Scorchio Chocolate Cake': 570,
    'Can of Neocola': 550,
    'Celery Achyfi': 550,
    'Diet Neocola': 550,
    'Grape Roll': 550,
    'Low Fat Milk': 550,
    'Veggie Poogle Wrap': 550,
    'White Chocolate Pear': 550,
    'Honey Topped Buzz Sundae': 540,
    'Dubloon Nuggets': 530,
    'Pteri Spaghetti': 530,
    'Settra': 530,
    'Beefy Broccoli': 500,
    'Coltzan Negg': 500,
    'Cybunny Carrot Pasta': 500,
    'Enoki-n-Cheese Plank': 500,
    'Eyrie Pancake': 500,
    'Fajita Chips': 500,
    'Fake Blumaroo Steak': 500,
    'Green Cabbage': 500,
    'Kyrii Chocolate Milkshake': 500,
    'Lutaya': 500,
    'Meat Lasagne': 500,
    'Noil Cracker': 500,
    'Paper-Wrapped Cheese': 500,
    'Plain Mashed Potato': 500,
    'Plain Negg Neggnog': 500,
    'Skull-n-Bones Pasta': 500,
    'Snot Split': 500,
    'Sprinkling of Oregano': 500,
    'Tooth Faerie Ice Lolly': 500,
    'Yurble Pasta': 500,
    'Blueberry Roll': 490,
    'Tuna Sub': 490,
    'Coffee': 480,
    'Krawk Apple': 480,
    'Mint Flavoured Borovan': 480,
    'Snow Apple': 480,
    'Strawberry Skeith Cone': 480,
    'Sushi Rolls': 480,
    'Meaty Usul Wrap': 470,
    'Molten Hot Chilli': 460,
    'Berry Eyrie Souffle': 450,
    'Cheesy Krawk Pot': 450,
    'Custard Parfait': 450,
    'Mutant Apple': 450,
    'Uni Veggiewrap': 450,
    'Zafara Hot Chocolate': 450,
    'Sausage on Toast': 440,
    'Sea Cocktail': 430,
    'Meaty Pot Pie': 420,
    'Baby Bruce Milk Bottle': 400,
    'Bag of Nuts': 400,
    'Banana Roll': 400,
    'Breakfast Croissant': 400,
    'Carton of Orange Juice': 400,
    'Chips and Curry Sauce': 400,
    'Scorchio Banana Cake': 400,
    'Snot Wrap': 400,
    'Strawberry Poogle Cupcake': 400,
    'Banana Honey Gormball Sandwich': 390,
    'Chocolate Skeith Cone': 390,
    'Caramel Acara On A Stick': 380,
    'Chokato Chomby Crisps': 350,
    'Purple Bruce Juice': 350,
    'Raspberry Usul Shake': 350,
    'Cherry Twist Lollypop': 340,
    'Iced Borovan': 340,
    'Pteri Sundae': 330,
    'Fruit Krawk Pot': 320,
    'Leafy Krawk Pot': 310,
    'Green Apple': 300,
    'Hasee Puff Cereal': 300,
    'Jalapeno Pretzal': 300,
    'Mystery Island Chocolate Milk Glass': 300,
    'Plain Omurice': 300,
    'Strawberry Jetsam Sandwich': 300,
    'Mutant Carrot': 290,
    'Vanilla Milkshake': 290,
    'Sprinkling of Chilli Pepper': 280,
    'Cheeseburger': 270,
    'Cherries': 250,
    'Gruel Cake': 250,
    'Pegleg Chicken': 250,
    'Stuffed Shells': 250,
    'Chocolate Milkshake': 240,
    'Mynci Meat Pie': 230,
    'Vegetarian Cheeseburger': 230,
    'B-B-Q Pork': 220,
    'Mint Ice Cream': 220,
    'Aisha Toffee Apple': 200,
    'Cherry Milkshake': 200,
    'Churros': 200,
    'Egg Gelatin': 200,
    'Elderberry Achyfi': 200,
    'Jhudora Rotten Negg': 200,
    'Scorched Veggies': 200,
    'Toffee Ice Cream': 200,
    'Cheesy Meat Wrap': 150,
    'Spicy Chicken Burrito': 150,
    'Vanilla Kougra Pudding': 150,
    'Coco NeoCrunch': 130,
    'Fried Chicken Breast': 130,
    'Super Spicy Borovan': 130,
    'Chocopie Slice': 120,
    'Crispies': 110,
    'Banana Milkshake': 100,
    'Beef and Veg Baby Food': 100,
    'Beetroot Ice Cream': 100,
    'Chokato Kougra Pudding': 100,
    'Forest Fruit Baby Food': 100,
    'Garlic Cheese Toast': 100,
    'Green Grapes': 100,
    'Lemon Meringue Baby Food': 100,
    'Meat Wrap': 100,
    'Strawberries and Cream Baby Food': 100,
    'Orange': 85,
    'Bitten Green Apple': 60,
    'Buttered Toast': 60,
    'Aisha Cheeseburger': 50,
    'Beetroot and Cream Smores': 50,
    'Flaming BBQ Crisps': 50,
    'Fried Chicken and Waffles': 50,
    'Mashed Potato With Gravy': 50,
    'Strawberry Kougra Pudding': 50,
    'Bag of Chips': 45,
    'Lupe Snack Pack': 40,
    'Orange Chicken': 35,
    'Borovan Ice Cream Scoop': 30,
    'Egg Salad and Cheese Sandwich': 30,
    'Pack o Pumpkin Seeds': 30,
    'Water Ice Cream': 30,
    'Endless Salad and Bread Sticks': 25,
    'Neggy Custard Pie': 19,
    'Aisha Riceball': 18,
    'Buried Treasure Crackers': 15,
    'Haunted Woods Chocolate Milk Glass': 15,
    'Starry Crunch': 15,
    'Corn Bread': 13,
    'Chocolate Kougra Pudding': 12,
    'Gummy Pirate Candies': 10,
    'Fish and Chips': 9,
    'Neo Crackers': 9,
    'Dirt Pie': 6,
    'Treasure Map Negg': 5,
    'Edible Smelly Gym Socks': 4,
    'Pirate Potato Crisps': 4,
    'Square Gelatin': 4,
    'Starry Cookie Pile': 4,
    'Berry Joy Fun Pop': 10000001,
    'Bilge Rat Madeira': 10000001,
    'Candy Floss Carrot': 10000001,
    'Capn Threelegs Cutlass Crusade': 10000001,
    'Chain of Onions': 10000001,
    'Cheesy Chokato Pie': 10000001,
    'Cherry Pop': 10000001,
    'Chicken Filets with Fancy Sauce': 10000001,
    'Chocolate Coated Cheese Strings': 10000001,
    'Chocolate Sandwich': 10000001,
    'Chocolately Cheese Wedges': 10000001,
    'ErgyFruit Grog': 10000001,
    'Fish Negg Stew': 10000001,
    'Grape Pop': 10000001,
    'Krakuberry Grog': 10000001,
    'Mocha Joy Fun Pop': 10000001,
    'Olivetato': 10000001,
    'Onion and Mustard Pie': 10000001,
    'Our Famous Krawk Pie': 10000001,
    'Pizza Sandwich': 10000001,
    'Puntec Cupcake': 10000001,
    'Raspberry Pop': 10000001,
    'Slithering Squid Surprise': 10000001,
    'Tchea Grog': 10000001,
}

def gen_restock_list():
    np = lib.NeoPage(base_url='https://items.jellyneo.net')
    path = '/search/'
    args = []
    # For Fresh Foods shop.
    args.append('cat[]=1')
    # Hubert's Hot Dogs
    #args.append('cat[]=42')
    args.append('min_rarity=1')
    args.append('max_rarity=100')
    args.append('status=1')
    args.append('sort=5')
    args.append('sort_dir=desc')
    # Cove
    #args.append('scat[]=16')

    start = 0
    while True:
        np.get(path, *args, f'start={start}')
        results = re_jn_item.findall(np.content)
        for item_id, name, price_updated, price in results:
            if price == 'Inflation Notice':
                np.get(f'/item/{item_id}')
                price = re.search('<div class="price-row">(.*?) NP', np.content)[1]
            try:
                price = lib.amt(price)
            except (ValueError, TypeError, IndexError):
                # safe assumption that unpriceable items are at least 10M NP?
                price = 10000001
            print(f'\'{name}\': {price},')
        start += 50
        if not re.search(r'<li class="arrow"><a href=".*?">&raquo;</a>', np.content):
            break

def find_neopet(img_data, img_name):
    img = Image.open(io.BytesIO(img_data))
    os.makedirs('shop_captchas', exist_ok=True)
    img.save(f'shop_captchas/{img_name}.png')
    filtered = img.filter(ImageFilter.FIND_EDGES)
    filtered.save(f'shop_captchas/{img_name}-filtered.png')
    width, height = img.size
    # Take median x and median y coordinate of N darkest pixels.
    # Impl is a bit slow, but at least conceptually clear
    N = 21
    best_score = -100000
    xys = []
    for y in range(1, height - 1):
        for x in range(1, width - 1):
            r, g, b = img.getpixel((x, y))
            fr, fg, fb = filtered.getpixel((x, y))
            score = (fr + fg + fb) - (r + g + b)
            xys.append((score, (x, y)))
    xys.sort()
    xys = xys[-N:]
    best_x = sorted(x for _, (x, y) in xys)[N//2]
    best_y = sorted(y for _, (x, y) in xys)[N//2]
    draw = ImageDraw.Draw(img)
    draw.ellipse((best_x - 5, best_y - 5, best_x + 5, best_y + 5), fill=(255, 0, 0))
    for _, (x, y) in xys:
        draw.point((x, y), fill=(255, 255, 0))
    img.save(f'shop_captchas/{img_name}-solved.png')

    # introduce a bit of noise
    best_x += random.randint(-2, 2)
    best_y += random.randint(-2, 2)
    return best_x, best_y

def haggle_price(price):
    #price = int(price * 0.98)
    if price < 100:
        return price
    base = price
    while base >= 100: base //= 10
    base -= 1
    if base < 10: base = 98
    result = base
    while result < price:
        result = result * 10 + (result % 100 // 10)
    result //= 10
    return result

def restock(shop_id):
    inventory.ensure_np(99999)
    np = lib.NeoPage()
    np.get('/objects.phtml', f'obj_type={shop_id}', 'type=shop')
    items = re_shop_item.findall(np.content)
    shop_name = re_header.search(np.content)[1].strip()
    print(f'{len(items)} items found at {shop_name}.')

    # Look for profitable items
    best_score = ()
    best = None
    for obj_info_id, stock_id, g, brr, image, desc, name, stock, price in items:
        price = lib.amt(price)
        # TODO: Here we assume that items with the same name but drastically
        # different value won't restock in shops. For a more fine-grained
        # search, should search using image as well.
        true_price = item_db.get_price(name, update=False) or always_buy.get(name)
        if not true_price:
            continue
        print(f'Item: {stock} x {name} for {price} NP. (True price {true_price} NP)')

        profit = true_price - price
        score = (name in always_buy, profit, profit / price)
        if score > best_score:
            best_score = score
            best = (name, price, obj_info_id, stock_id, brr)

    if not best:
        return

    name, price, obj_info_id, stock_id, brr = best
    if (
            (best_score[0] and best_score[1] > MIN_PROFIT) or
            (best_score[1] >= MIN_PROFIT and best_score[2] >= MIN_PROFIT_MARGIN)
        ):
        np.get('/haggle.phtml', f'obj_info_id={obj_info_id}', f'stock_id={stock_id}', f'brr={brr}')
        referer = np.referer
        _x_pwned = re_captcha.search(np.content)[1]
        np.get('/captcha_show.phtml', f'_x_pwned={_x_pwned}')

        offer = haggle_price(price)
        print(f'Trying to buy {name} for {offer} !!')
        best_x, best_y = find_neopet(np.content, _x_pwned)
        np.set_referer(referer)
        print(f'Haggling @ {offer}')

        np.post('/haggle.phtml', f'current_offer={offer}', f'x={best_x}', f'y={best_y}')
        if 'I accept your offer' in np.content:
            print('Bought!')
        else:
            print('Not bought :( TODO: See what happened')
    else:
        print(f'No worthy items found. Best was {best[0]} (profit {best_score[2]*100:.1f}% = {best_score[1]})')

    # Learn about unknown items
    for obj_info_id, stock_id, g, brr, image, desc, name, stock, price in items:
        try:
            item_db.get_price(name)
        except item_db.ShopWizardBannedException:
            return

if __name__ == '__main__':
    #restock(13) # Neopian Pharmacy
    #restock(79) # Brightvale Glaziers
    #restock(68) # Collectable Coins
    #restock(14) # Chocolate Factory
    #restock(58) # Post office
    #restock(8) # Collectable cards
    gen_restock_list()
